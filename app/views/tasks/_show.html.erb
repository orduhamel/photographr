<div class="container">
  <div class="row">
    <div class="col px-5">
      <!-- TASK SHOW -->
      <div class="task-show container-fluid">

        <!-- Close button -->
        <div class="row">
          <div class="col px-0">
            <button type="button" class="close mt-5" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
        </div>

        <!-- Infos Prestation & Client -->
        <div class="row my-4 justify-content-between align-items-center">
          <div class="col-6 px-0">
            <p class="px-0 m-gray"><%= task.prestation.category.upcase %> - <%= task.prestation.client.last_name %></p>
          </div>
          <div class="col-6 px-0">
            <% if task.prestation.start_date != task.prestation.end_date %>
              <p class="text-right m-gray"><%= l(task.prestation.start_date, format: '%d') %> - <%= l(task.prestation.end_date, format: '%d %B %Y') %></p>
            <% else %>
              <p class="text-right m-gray"><%= l(task.prestation.start_date, format: '%d %B %Y') %></p>
            <% end %>
          </div>
        </div>

        <!-- Task name -->
        <div class="row justify-content-between align-items-center">
          <div class="task-name">
            <h2><%= task.name %></h2>
          </div>
        </div>

        <!-- Task dates -->
        <div class="row mt-1 justify-content-between">
          <div class="col px-0">
            <p class="medium-gray"><i class="far fa-calendar mr-2"></i> <%= l(task.start_date, format: '%d %B') %></p>
          </div>
        </div>

        <!-- Task description -->
        <div class="row my-3 task-description">
          <p class="text-justify medium-gray"><%= task.description %></p>
        </div>

          <div class="col px-0 d-flex justify-content-end align-items-center">
            <!-- Tag urgent -->
         <!--    <div class="urgent-tag mr-3">
              <p>urgent</p>
            </div> -->
            <!-- Tag TODO -->
           <!--  <div class="todo-tag mr-3">
              <p>à faire</p>
            </div> -->
          </div>

        <!-- Modify button -->
        <div class="row justify-content-end">
          <%= link_to 'Modifier', edit_task_path(task), class: "pho-btn" %>
        </div>
      </div>
      <!-- END OF TASK SHOW -->
    </div>
  </div>
  <div class="row">
    <div class="col px-5">
      <!-- TASK EDIT -->
      <div class="container-fluid task-form">
        <div class="row justify-content-center">
          <div class="col px-0">
            <div class="form-post mb-5">
              <h1 class="mt-3 mb-5">Modifier la tâche<span class="green-point">.</span></h1>
              <%= simple_form_for task do |f| %>

                <!-- Error message -->
                <% if task.errors.any? %>
                  <div class="errors-container">
                    <ul>
                      <% task.errors.full_messages.each do |message| %>
                        <li><%= message %></li>
                      <% end %>
                    </ul>
                  </div>
                <% end %>

                <!-- Form -->

                  <%= f.input :name,
                              as: :string,
                              label: 'Titre' %>

                  <%= f.input :kind,
                              as: :select,
                              collection: Task::KINDS,
                              input_html: {class: "select2"},
                              label: 'Type' %>

                  <%= f.input :description,
                              as: :text,
                              label: 'Description' %>


                  <div class="row">
                    <div class="start-date col">
                      <%= f.input :start_date,
                                  as: :string,
                                  required: false,
                                  input_html: {class: "datepicker"},
                                  label: 'Date de début' %>
                    </div>
                    <div class="end-date col">
                      <%= f.input :end_date,
                                  as: :string,
                                  required: false,
                                  input_html: {id: "end_date", class: "end_date"},
                                  label: 'Date de fin' %>
                    </div>
                  </div>
                  <div class='dates-div d-none'>
                    <label>Dates</label>
                      <input type="text" id="range-dates">
                  </div>

                  <%= f.input :urgent,
                              as: :radio_buttons,
                              wrapper: :vertical_collection_inline,
                              label: 'Urgent' %>

                  <%= f.input :done,
                              as: :radio_buttons,
                              wrapper: :vertical_collection_inline,
                              label: 'Terminée' %>

                  <div class="d-flex flex-row-reverse mt-4">
                    <%= f.submit "Modifier", class: 'pho-btn' %>
                  </div>
              <% end %>
            </div>
          </div>
        </div>
      </div>
      <!-- END OF TASK EDIT -->
    </div>
  </div>
</div>
